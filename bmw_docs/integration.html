<div>
<span class="code-comment">Versioning </span>
 
```
Version: 1.0
Date: 12/09/2025
```
</div>



**<h2 id="Introduction"> 1. Introduction </h2>**

BMW Group vehicles generate telematics data that are transferred exclusively to secure BMW servers. These data points are stored and can be accessed in accordance with the Extended Vehicle (ExVe) approach. For instance, this data may include status information such as mileage, usage-based metrics like average fuel consumption, or event data such notifications about automatic service calls.

In addition to the Customer Archive which provides your vehicle data conveniently packaged in a .zip file, BMW CarData enables access to your vehicle data on a technical level: via data streams and RESTful APIs. We aim to guide you to establish an initial connection and then retrieve your vehicle on a continuous basis via these commonly used technologies.  
For individuals with a solid understanding of modern IT-concepts and -technologies, this document provides the necessary technical details and metadata to help you retrieve a personalized set of data generated by your vehicle. While this document reflects the recommended sequence of actions to take, the data stream and RESTful API function as independent and parallel solutions, with no direct dependency on each other.

The following illustration offers an overview of the obligatory steps to establish your technical connection to BMW CarData.

<img alt="CarData" src="https://bmwcardata.bmwgroup.net/cockpit/api/v1/content/download-content-file/2994" style="width: 100%" />

Figure 1: Overview
<br>
<br>
<h3 id="Introduction_Frequently-used-terms">1.1 Frequently used terms</h3>

<u>Connected Drive portal</u>

BMW ConnectedDrive includes all innovative equipment and features designed to intelligently connect vehicle occupants and the vehicle to the outside world. This includes telematics services, vehicle assistance systems, integration with mobile and devices, entertainment options and traffic services.

<u><p id="Customer-portals">Customer portals</p></u>

BMW customers can use the "My BMW ConnectedDrive" customer portal to manage personal data and vehicle settings necessary for utilizing BMW ConnectedDrive services within the vehicle, across various applications and via the BMW ConnectedDrive call center. Additionally, customers can add services or extend the active duration of existing ones. The customer information entrusted to BMW CarData is integrated to the My BMW portal, enabling customers to view and manage data access clearances (permissions) for third parties.

| **Portal** | **Link** | **Comment** |
| --- | --- | --- |
| BMW ConnectedDrive | [Direct link](https://www.bmw.co.uk/en/shop/ls/country-selection) |  |
| Mini Connected | [Direct link](https://www.mini-connected.com/en_CD/choose-market.html) |  |
| Toyota Supra Connect | [Direct link](https://www.toyota-supraconnect.de/de-de/mytoyota/public/country-region-selection) |  |
| Rolls-Royce Connected | [Direct link](https://cardata.rolls-roycemotorcars.com) |  |
| My BMW Motorrad | [Direct link](https://www.bmw-motorrad.com/en/experience/my-bmw-motorrad-landingpage.html)| For a different language, click button top right: "BMW Motorrad in your country" |


<u><p id="VIN">VIN</p></u>

The Vehicle Identification Number (VIN) is a standardized 17-digit code used to uniquely identify a vehicle.

<u><p id="Mapping">Mapping</p></u>

The link between a Customer ID (“GCID”) and a VIN is referred to as “mapping”. Once a vehicle is mapped to your account, you are identified as the owner or user, allowing you to access vehicle-related functions and services through My BMW app or web portal, such as Remote Services to lock or unlock your vehicle.  
For further instructions on how to map visit these links: [German](https://faq.bmw.de/s/article/My-BMW-App-Fahrzeug-hinzuf%C3%BCgen-Link-zu-How-To-Video-2EwM5?language=de%29) or [English](https://faq.bmw.co.uk/s/article/My-BMW-App-Add-vehicle-Link-to-how-to-video-jT4lb?language=en_GB).

<u><p id="Mapping-type">Mapping-type</p></u>

It is possible to map multiple user accounts to a single VIN. The concepts of PRIMARY (or MAIN user) and SECONDARY (or CO/JOINT user) mappings are explained here: [German](https://faq.bmw.de/s/article/My-BMW-App-My-BMW-Portal-Fahrzeug-hinzuf%C3%BCgen-Multi-Mapping-w9N5D?language=de) or [English](https://faq.bmw.co.uk/s/article/My-BMW-App-My-BMW-portal-Add-vehicle-Multi-mapping-OwH4n?language=en_GB). 

<u>Telematic data key</u>

A telematic data key can be seen as one attribute (e.g. mileage) or a logically connected set of attributes (e.g. “basic vehicle data”) containing data generated by your vehicle.

<u><p id="Container">Container</p></u>

The telematics data (“keys”) are provided in a data structure called “container” representing a specific use case. The containers can be configured individually via API.

<u><p id="Telematic-data-catalogue">Telematic data catalogue (TDC)</p></u>

The telematic data catalogue is the single-point-of-truth when it comes to the availability of telematic data keys through BMW CarData. You can find the TDC with the link below. Be aware that the DTC is also available in your market language. Find the translated TDC in your [customer portal](#Customer-portals) in the CarData section. 

| **Portal** | **Link to the DTC (EN-Version)** |
| --- | --- | 
| BMW ConnectedDrive | [Direct link](https://www.bmw.co.uk/en-gb/mybmw/public/cardata-telematic-catalogue)
| Mini Connected | [Direct link](https://www.mini.co.uk/en-gb/mymini/public/cardata-telematic-catalogue)
| Toyota Supra Connect | [Direct link](https://www.toyota-supraconnect.de/de-de/mytoyota/public/country-region-selection)
| Rolls-Royce Connected | [Direct link](https://cardata.rolls-roycemotorcars.com/en-gb/myrr/public/cardata-telematic-catalogue)
| My BMW Motorrad | Not yet available

<br>

<h3 id="Introduction_Availability-and-additional-information">1.2 Availability and additional information</h3>

In order to retrieve vehicle-data via BMW CarData on a technical level, four prerequisites must be met.

<u>Prerequisites:</u>

- your vehicle is equipped with an active SIM card
- your vehicle is assigned to a supported market (EU)
- you have an active Connected Drive contract
- your vehicle is mapped to your Connected Drive account

The terms and conditions for the usage of BMW CarData can be found here (link to: B2C T&Cs).  

<u><p id="Timestamps">Timestamps</p></u>

When retrieving telematics data via the BMW CarData API, timestamps are provided for the respective values. You can use the timestamps to identify when a specific value was transmitted from the vehicle to the backend.

<u>Example response:</u>

    {
    "name: "vehicle.cabin.infotainment.navigation.currentLocation.longitude",
    "timestamp": ""2025-07-28T05:16:53.000Z",
    "unit": “degrees”,
    "value": "9.498705"
    }

All timestamps provided by BMW CarData are specified in the [ISO 8601](https://www.iso.org/iso-8601-date-and-time-format.html) format.
<br>
<br>

**<h2 id="Technical-registration">2. Technical registration </h2>**


In order to retrieve your vehicle data via a data stream or REST API you must first complete the technical registration. BMW CarData offers a standardized Oauth authorization method: [OAuth 2.0 Device Authorization Grant](https://datatracker.ietf.org/doc/html/rfc8628), stated in this document as the Device Code Flow. 
<br>
<br>
<h3 id="Technical-registration_Step-1">2.1 Step 1: Generate your client ID </h3>

Generate a CarData client ID in the [customer portal](#Customer-portals) frontend. This creates a unique client ID within the BMW back end systems, which will be displayed upon clicking the **Create CarData Client** button. Your client ID serves two important purposes: it is required for registering your devices using the Device Code Flow (explained in the following chapter), and it is essential for generating tokens to ensure continuous access to your most recent vehicle data. 

<img alt="CarData" src="https://bmwcardata.bmwgroup.net/cockpit/api/v1/content/download-content-file/3000" style="width: 80%" />

Figure 2: Create CarData Client
<br>
<br>
<h3 id="Technical-registration_Step-2">2.2 Step 2: Subscribe to services</h3>

After generating your client ID, it is necessary to subscribe to the relevant services. This allocates a specific scope to your client ID, which is required for the subsequent steps. Upon interacting with the corresponding buttons in the frontend, the following scopes will be allocated to your client ID:

<u><p id="Scopes">Scopes in CarData:</p></u>

| **Description** | **Scope** |
| --- | --- | 
| Scope for CarData API | cardata:api:read | 
| Scope for CarData Stream | cardata:streaming:read | 

<br>
<br>
<img alt="CarData" src="https://bmwcardata.bmwgroup.net/cockpit/api/v1/content/download-content-file/2995" style="width: 100%" />

Figure 3: Create CarData Client
<br>
<br>
<p>
<u>Consider:</u>
</p>

If you have not completed the subscription step before registering your device (see chapter below), your tokens will not work for the corresponding CarData service. 
<br>
<br>
<h3 id="Technical-registration_Step-3">2.3 Step 3: Register via the Device Code Flow</h3>

Use a REST client application or the command line to execute the cURLs of the Device Code Flow (DCF). Each of the upcoming example requests will be filled with the host from our [Swagger](https://bmw-cardata.bmwgroup.com/customer/public/api-specification). Sensitive fields have been populated using placeholders in the examples below, while others have been kept as is or truncated to demonstrate their format.  
For further details on the available endpoints, please refer to the [Swagger file](https://bmw-cardata.bmwgroup.com/customer/public/api-specification). 
<br>
<br>
<h4 id="Technical-registration_Step-3_Request-codes">2.3.1 Request your codes</h4>

To initiate the authorization-process for a specific device, call the endpoint shown below. This method will deliver the user code and the device code provided by our services.

**POST /gcdm/oauth/device/code**

<u>Request details:</u>

- [client_id](#Technical-registration_Step-1): use the generated client ID from the [customer portal](#Customer-portals) 
- response_type: use the fixed value as stated in the [Swagger file](https://bmw-cardata.bmwgroup.com/customer/public/api-specification)
- code_challenge: see further explanation below
- code_challenge_method: use the fixed value as stated in the [Swagger file](https://bmw-cardata.bmwgroup.com/customer/public/api-specification)
- scope: use the values as stated in the [Swagger File](https://bmw-cardata.bmwgroup.com/customer/public/api-specification) and see further explanation below

<u><p id="Code-verifier-code-challenge">Code_verifier & code_challenge:</p></u>

The S256 code challenge method in PKCE (Proof Key for Code Exchange) improves security by hashing the code verifier using SHA-256 and then encoding the result with Base64url. This approach provides a more secure way to verify the client during the authorization code exchange compared to the plain method, where the code verifier is used directly.
The standard is further described [here](https://datatracker.ietf.org/doc/html/rfc7636#section-4).

<u>code_verifier</u>:

A cryptographically random string generated by the client.

<u>code_challenge</u>:

A transformation of the code_verifier, using either the plain or S256 method.

<u><p id="Scopes">Scopes:</p></u>

When authenticating a user with OAuth 2.0, there are generally two ways to request scopes: explicit or default. Requesting specific scopes enhances security and user control by limiting the access granted to the application, while expecting default scopes may result in unnecessary permissions. We recommend explicitly requesting the “authenticate_user” and “openid” scopes, which facilitates the authentication process for OAuth 2.0 (and OpenID Connect). Additionally add the scopes of the services you are interested in and the client ID is subscribed to. See [this chapter](#Scopes) for the correct notations of the CarData specific scopes. Therefor it is suggested to define the scopes as following: 

<u>Example request for a subscription to both services:</u>

    curl --request POST \
      --url https://customer.bmwgroup.com/gcdm/oauth/device/code \
      --header 'Accept: application/json' \
      --header 'Content-Type: application/x-www-form-urlencoded' \
      --data client_id=cj5b3499-4918-40x6-a232-f4112f837d72 \
      --data response_type=device_code \      
      --data 'scope=authenticate_user openid cardata:streaming:read cardata:api:read'
      --data code_challenge=yourCodeChallenge \
      --data code_challenge_method=S256 \
    
<u>Response details:</u>

- <span id=user-code> user_code: the device verification code </span>
- <span id=device-code>device_code: used by the device to poll for the tokens in the final step of the flow </span>
- <span id=interval>interval: The minimum amount of time in seconds that the client should wait between polling requests to the token endpoint</span>
- <span id=expiry-time> expires_in: The lifetime in seconds of the "device_code" and "user_code" </span>
- <span id=verification-uri> verification_uri: link to the page for the user to authorize the login </span>
- <span id=verification-uri-complete> verification_uri_complete: link to the page for the user to authorize the login including the user_code </span>
<br>
<br>
<h4 id="Technical-registration_Step-3_Authenticate-device">2.3.2 Authenticate the device</h4>

After successfully retrieving your [user_code](#user-code) & [device_code](#device-code), you now need to authenticate within the given [expires_in](#expiry-time) time. Open the [verification_uri_complete](#verification-uri-complete) link in a browser and log in with your [customer portal](#Customer-portals) credentials if you are not already logged in.  
Alternatively you can use the highlighted button in the CarData page, which refers to [verification_uri](#verification-uri)-link, to manually add the [user_code](#user-code):

<img alt="CarData" src="https://bmwcardata.bmwgroup.net/cockpit/api/v1/content/download-content-file/2996" style="width: 100%" />

Figure 4: Authenticate device
<br>
<br>
After clicking the corresponding frontend button, you will get navigated to a page where the user_code needs to be added:
<br>

<img alt="CarData" src="https://bmwcardata.bmwgroup.net/cockpit/api/v1/content/download-content-file/3007" style="width: 20%" />

Figure 5: Enter Code
<br>
<br>
<h4 id="Technical-registration_Step-3_Request-tokens">2.3.3 Request your tokens</h4>

After successfully completing the authentication of your device, you are now able to request your tokens.

**/gcdm/oauth/token**

<u>Input-parameters:</u>

- Content-Type: Use the fixed value as stated in the [Swagger](https://bmw-cardata.bmwgroup.com/customer/public/api-specification)
- client_id: Use the generated [client ID](#Technical-registration_Step-1) from the [customer portal](#Customer-portals)
- device_code: Part of the response of [POST /gcdm/oauth/device/code](#Technical-registration_Step-3_Request-codes)
- grant_type: Use the fixed value as stated in the [Swagger](https://bmw-cardata.bmwgroup.com/customer/public/api-specification), additional information [here](https://datatracker.ietf.org/doc/html/rfc8628#section-3.4)
- code_verifier: See explanation from [this chapter](#Code-verifier-code-challenge)

<u> Example request </u>

    curl --request POST \
      --url https://customer.bmwgroup.com/gcdm/oauth/token \
      --header 'Content-Type: application/x-www-form-urlencoded' \
      --data client_id=cj5b3499-4918-40x6-a232-f4112f837d72 \
      --data device_code=yourDeviceCode \            
      --data grant_type=urn:ietf:params:oauth:grant-type:device_code \
      --data code_verifier=yourCodeVerifier

<u>Response details:</u>

- access_token: your token to access the CarData APIs
- token_type: the type of the token (Bearer)
- expires_in: the duration in seconds until the access token expires
- refresh_token: the token to refresh your access token
- scope: the given scope(s) of your token(s)
- id_token: your token to access the CarData data stream
- gcid: your unique identifier of your portal user account

The response contains three tokens, consisting of an access token, the refresh token and the ID token.

<u><p id="Access-token">The access token:</p></u>

Use this token to access the CarData APIs, by including it in the header of each request to authenticate as the requesting user. In the back end, we verify the user, check the associated scope and ensure that the given token is still valid and has not yet expired. The access token is valid for 1 hour (3600 seconds).

<u><p id="Refresh-token">The refresh token:</p></u>

Use this token to refresh your access-token and your ID-token. The refresh-token is valid for two weeks (1.209.600 seconds). Once your refresh-token has expired, you have to rerun the device code flow and register your device again. Therefore, it is suggested to refresh your refresh-token in time. When a client ID is de-subscribed from its associated services, the corresponding refresh-token would lose its validity immediately.

<u><p id="ID-token">The ID token:</p></u>

The ID token is used to access the CarData data stream. For further details, please refer to the [associated chapters](#Streaming) of this document. The ID token is valid for one hour (3600 seconds).
<br>
<br>
<h3 id="Technical-registration_Step-4">2.4 Step 4: Refresh your tokens iteratively</h3>

In order to access vehicle data - either per stream or REST API calls - you have to remain authenticated with a valid token. If your current access token/ID token is about to expire, you can easily request a new one using the refresh token as an input parameter in the token endpoint:

**/gcdm/oauth/token**

Example curl for requesting a new access token with the refresh token:

    curl --request POST \
      --url https://customer.bmwgroup.com/gcdm/oauth/token \
      --header 'Content-Type: application/x-www-form-urlencoded' \
      --data grant_type=refresh_token \
      --data refresh_token=yourRefreshToken \
      --data client_id=cj5b3499-4918-40x6-a232-f4112f837d72

This generates a new set of access token, refresh token and ID token and also resets the expiry timer of each token. Please refer to the [Swagger](https://bmw-cardata.bmwgroup.com/customer/public/api-specification) or [this chapter](#Technical-registration_Step-3_Request-tokens) for further explanation concerning the response.
<br>
<br>

**<h2 id="CarData-API">3. CarData API</h2>**

This chapter contains additional information about the CarData RESTful API. For further details, please refer to the swagger documentation.
<br>
<br>
<h3 id="CarData-API_Prerequisites">3.1 Prerequisites</h3>

You must perform the following steps to be able to access the CarData endpoints:

<u>Mapping of the vehicle</u>

The vehicle you want to retrieve data for needs to be [mapped](#Mapping) to your [customer portal](#Customer-portals) account. You need to be [PRIMARY user](#Mapping-type) (i.e. main user / admin) for the given VIN.

<u>Generated client ID</u>

You have successfully generated a [client ID](#Technical-registration_Step-1) in your [customer portal](#Customer-portals).

<u>Subscription & scope</u>

You are successfully subscribed to the CarData API & your device was registered with the correct [scope](#Scopes). [This chapter](#Technical-registration_Step-2) contains more information about this step. Be aware, the subscription must have been performed before registering your device.


<img alt="CarData" src="https://bmwcardata.bmwgroup.net/cockpit/api/v1/content/download-content-file/2997" style="width: 100%" />

Figure 6: Subscribe to API
<br>
<br>
<u>Device code flow & access token</u>

In order to use our CarData API solution, you need to authenticate via a valid [access token](#Access-token) which needs to be included in every call. The retrieval of the [access token](#Access-token) is part of our [Device Code Flow](#Technical-registration_Step-3). Use the corresponding chapters from this integration guide and the [device-code-flow swagger](https://bmw-cardata.bmwgroup.com/customer/public/api-specification).
<br>
<br>
<h3 id="CarData-API_Authentication">3.2 Authentication</h3>

The [access token](#Access-token) needs to be included in the header of each CarData API request. Further details on how to retrieve this token are described [here](#Technical-registration_Step-3_Request-tokens).
<br>
<br>
<h3 id="CarData-API_Additional-information">3.3 Additional information concerning the CarData endpoints</h3>

Additional information about CarData endpoints, their input parameters and the structure of their responses can be found in the [CarData API Swagger](https://bmw-cardata.bmwgroup.com/customer/public/api-specification).

In addition to the technical documentation, the upcoming chapters contain supplementary information. Most of the endpoints can be used to retrieve data which were generated by using the given vehicle. Therefor it is suggested to take a deeper look at the [telematic data catalogue](#Telematic-data-catalogue), as this documentation contains the description and additional metadata for each telematic key.

<u>Consider rate-limit:</u>

The use of the CarData APIs is subject to a daily rate limit of 50 requests. If you require more frequent access to your vehicle data, we recommend utilizing the CarData streaming solution.
<br>
<br>
<h4 id="CarData-API_Additional-information_Endpoint-Mapping">3.3.1 Endpoint: Mapping information</h4>

**GET /customers/vehicles/mappings**

The mapping endpoint returns information about vehicles that are [mapped](#Mapping) to your account, including the [mapping type](#Mapping-type) (PRIMARY or SECONDARY). Be aware that you are only able to retrieve data for mapped vehicles for which you are the primary user.

<u>Consider:</u>

Not all vehicle models are capable of having secondary users. If there is no such concept, the mapped user is considered the primary user.
<br>
<br>
<h4 id="CarData-API_Additional-information_Endpoints-Container">3.3.2 Endpoints: Container management</h4>

CarData offers you four endpoints to manage your containers. The endpoints have the following path:  
**/customers/containers/**

Use the [telematic data catalogue](#Telematic-data-catalogue) for further details about the available telematic keys. Be aware that there is a limit of 10 containers per user.

Create your [container(s)](#Container) via the POST endpoint. Use the [telematic data catalogue](#Telematic-data-catalogue) for the correct syntax concerning the _technicalDescriptor_ for a telematic key.

<u> Consider:</u>

You are able to add all available keys from the [TDC](#Telematic-data-catalogue) to a container, though keys which are bound to a dedicated endpoint - see [this table](#CarData-API_Additional-information_Data-retrieval-for-use-cases) - can not be retrieved via the data-retrieval-endpoint.<br>
Via the GET-endpoints you can retrieve all information about your created containers. A container can either have the state ACTIVE or INACTIVE. The [data retrieval](#CarData-API_Additional-information_Data-retrieval-for-container) for a given container is only achievable for containers with the state ACTIVE.<br>
Via the DELETE-endpoint you can set state for a container to INACTIVE. Containers which have the state INACTIVE will be deleted after 29 days automatically.
<br>
<br>
<p hidden> This document was proudly written by MKL. </p>
<h4 id="CarData-API_Additional-information_Data-retrieval-for-container">3.3.3 Retrieve your vehicle data for a container</h4>

With the following endpoint you are able to retrieve available data for telematics keys which were defined in the given container:

**GET /customers/vehicles/{vin}/telematicData**

Telematic keys which belong to the category [BASIC DATA](#CarData-API_Additional-information_Data-retrieval-for-use-cases) or which are bound to a [dedicated endpoint](#CarData-API_Additional-information_Data-retrieval-for-use-cases) will not be shown in this data retrieval. These cases are furthermore described in the upcoming chapter.

<u>Example response:</u>

    {
    "name: "vehicle.cabin.infotainment.navigation.currentLocation.longitude",
    "timestamp": ""2025-07-28T05:16:53.000Z",
    "unit": “degrees”,
    "value": "9.498705"
    }

You can find more information about the timestamp [here](#Timestamps).
<br>
<br>
<h4 id="CarData-API_Additional-information_Data-retrieval-for-use-cases">3.3.4 Retrieve your vehicle data for predefined use cases</h4>

The following table provides an overview of dedicated endpoints for specific telematic keys.

| **Endpoint** | **Telematic Key(s) – Technical descriptor** | **Additional information** |
| --- | --- | --- |
| GET /customer/vehicles/{vin}/smartMaintenanceTyreDiagnosis | vehicle.chassis.axle.wheel.tire.diagnosis |     |
| GET /customer/vehicles/{vin}/image | vehicle.look.image |     |
| GET /customer/vehicles/{vin}/chargingHistory | vehicle.powertrain.electric.battery.charging.history.sessionsList |     |
| GET /customer/vehicles/{vin}/basicData | All technical descriptors in category: BASIC_DATA |     |
| GET /customers/vehicles/locationBasedChargingSettings | vehicle.powertrain.electric.battery.charging.settingsList | Everything in English; KM as unit |

<br>

<h3 id="CarData-API_Additional-information_Error-codes">3.4 Error codes</h3>

The following table includes all error codes you might receive from BMW CarData.

| **ErrorID** | **Error message** | **ExveNote** |
| --- | --- | --- |
| CU-100 | No token sent | This application error is raised when there was no token included. |
| CU-101 | Authentication error | This application error is raised when there is an authentication error. |
| CU-102 | Token expired | This application error is raised when the given token is expired. |
| CU-103 | Token-scope is not CarData | This application error is raised when the given token is not authorized for the usage of the application: CarData. |
| CU-104 | No permission for specified VIN | This application error is raised when access to the VIN used is not permitted. Reasons are that the vehicle may not be telematics-capable or that the end-customer is not mapped to the given VIN. |
| CU-105 | No permission for specified containerId | This application error is raised when access to the containerId used is not permitted. Reasons are that the containerId is not allocated to the user or it does not exist. Use the GET /customer/containers endpoint to retrieve the identifier. |
| CU-120 | Format of parameter VIN is invalid | This application error is raised when the format of the VIN is invalid. The VIN is always exactly 17 characters long with UPPER case letters.<br><br>Please check the VIN used. |
| CU-121 | Format of parameter containerId is invalid | This application error is raised when the format of the containerId is invalid. The containerId always has a length of 13 characters, and can be retrieved after creation via the GET /customer/containers endpoint.  <br><br/>Please check the containerId used. |
| CU-122 | Container already set for deletion | This application error is raised when the container was already set for deletion. |
| CU-124 | Maximum number of containers reached | This application error is raised when the limit of containers is reached. A container needs to be deleted in order to be able to create a new one. |
| CU-125 | Pagination-Token expired | The specified pagination token in Request-URL is expired. |
| CU-126 | No vehicle image found  <br>for given VIN | This application error is raised if no vehicle image can be found for given VIN. |
| CU-127 | No LBCS data found | This application error is raised if no LBCS data is available for the given VIN. |
| CU-400 | Bad request | This error is raised when the request is wrong. |
| CU-401 | Parameter Invalid | This error is raised when the value of the input parameter was invalid/wrong. |
| CU-402 | Telematic key is invalid | This error is raised when at least one of the requested telematic keys is not found. |
| CU-429 | API rate limit reached | This application error is raised when the daily rate limit has been reached. |
| CU-500 | Internal server error | The server encountered an unexpected condition which prevented it from  <br>fulfilling the request. |
| CU-503 | Service temporarily unavailable | This error is raised in case a partner system is out of order. |
 
<br>
<br>

**<h2 id="Streaming">4. Streaming</h2>**

In this chapter, the basics of streaming and how to use the streaming service effectively are explored. You will learn what streaming is and how it works.

<u>Consider</u>:

Streaming is not available for BMW Motorrad.
<br>
<br>
<h3 id="Streaming_What-is-streaming">4.1 What is streaming?</h3>

Streaming is a method of transmitting data in real time over a network. It enables instant playback or analysis, making it ideal for applications where up-to-date information is critical. In the context of connected vehicle data, streaming provides raw, unprocessed information from your vehicle in real time.

What makes this particularly powerful is the ability to configure the stream based on your needs. It allows you to receive specific data based on predefined sets of attributes, giving you the flexibility to access only the data that’s relevant to your needs - such as location, tire pressure, or battery status.
<br>
<br>
<h3 id="Streaming_Technology">4.2 What technology do we use?</h3>

To ensure reliable, secure, and efficient delivery of real-time vehicle data, several key technologies are used.

<u>MQTT Protocol</u>

Data is transmitted using the MQTT (Message Queuing Telemetry Transport) protocol – a lightweight, publish-subscribe messaging protocol designed for low-bandwidth, high-latency, or unreliable networks. MQTT is ideal for streaming vehicle data because it enables fast, efficient, and reliable communication between your system and the streaming service. Further information can be found [here](https://mqtt.org/).

<u>OAuth for Authentication and Authorization</u>

Access to streaming data is protected using OAuth, an open-standard protocol that handles secure authentication and authorization. OAuth ensures that only authorized users and applications can subscribe to vehicle data streams, helping us maintain control over who accesses your data and how it's used. Please refer to [this chapter](#Technical-registration) concerning the technical registration, and [this example](#Streaming_MQTT-example) of how to connect to your stream using the ID-token.

<u>SSL/TLS for Data Security</u>

To safeguard the data in transit, all streaming communication is encrypted using SSL/TLS (Secure Sockets Layer / Transport Layer Security) protocols. This ensures that the raw vehicle data being transmitted is protected from interception or tampering, providing end-to-end confidentiality and integrity.

These technologies work together to provide a secure, scalable, and efficient streaming experience tailored to connected vehicle environments.
<br>
<br>
<h3 id="Streaming_Connect-to-stream">4.3 How to connect to your stream</h3>

Before you can start receiving real-time data from your vehicle, a few essential setup steps are required. These ensure that your connection is properly configured, authenticated, and ready for secure data transmission.
<br>
<br>
<h4 id="Streaming_Connect-to-stream_Prerequisites">4.3.1 Prerequisites</h4>

<u>Mapping of the vehicle</u>

The vehicle you want to retrieve data for needs to be mapped to your [customer portal](#Customer-portals) account. You need to be the PRIMARY user for the given VIN.

<u>Generated client ID</u>

You have successfully generated a client ID in your [customer portal](#Customer-portals).

<u>Subscription & scope</u>

You are successfully subscribed to the CarData Streaming & your device was registered with the correct [scope](#Scopes). [This chapter](#Technical-registration_Step-2) contains more information about this step. Be aware, the subscription must have been performed before registering your device.

<img alt="CarData" src="https://bmwcardata.bmwgroup.net/cockpit/api/v1/content/download-content-file/2998" style="width: 100%" />

Figure 7: Subscribe to Stream
<br>
<br>
<u>Device code flow & ID-token</u>

To use the data stream, you need to authenticate via a valid ID token. The retrieval of the ID token is part of our Device Code Flow. Use the corresponding chapters from this integration guide and the device-code-flow swagger.  
The ID token must be used as password, see [this chapter](#Streaming_MQTT-example) for an example using the MQTTX-client.

<u>Consider:</u>

- Only one connection per user (GCID) can be established at a time. In case there are several VINs mapped to a user account, subscribe to each VIN (represented by a topic) individually.
- Once the ID-token is expired, a new connection with a valid ID-token must be initiated.
- Validate dynamic scopes for your ID-token: Via [this example-homepage](https://jtw.io/) you can validate your ID-token. If there are no dynamic-scopes defined, your device was not registered with the correct scopes. [This chapter](#Technical-registration_Step-2) contains detailed information about the correct procedure. 
<br>
<br>
<h4 id="Streaming_Connect-to-stream_Create-Configuration">4.3.2 Create a Streaming Configuration</h4>

To create a streaming configuration, please navigate to your customer portal.

After you have successfully subscribed your client ID to CarData streaming, the button to configure your stream becomes active.

<img alt="CarData" src="https://bmwcardata.bmwgroup.net/cockpit/api/v1/content/download-content-file/3002" style="width: 100%" />

Figure 8: Configure data stream
<br>
<br>

After clicking the button "Configure data stream", you will be forwarded to another page where all streamable attributes are listed. The credentials for your stream will be visible in the [customer portal](#Customer-portals), after you have selected all the keys you want to receive data for.

<img alt="CarData" src="https://bmwcardata.bmwgroup.net/cockpit/api/v1/content/download-content-file/2999" style="width: 100%" />

Figure 9: Streaming credentials
<br>
<br>
<u><p id="Streaming_credentials">Streaming credentials:</p></u>

- Host: The server address that provides the data.
- Port: The network port used for establishing the connection.
- Topic: The specific data stream you want to subscribe to. The topic is declared with the [VIN](#VIN)-identifier for which you have requested the data stream. 
- Username: Used for identifying your client during connection, this is your GCID. 


These parameters are required when setting up your MQTT client to initiate the stream.
<br>
<br>
<h3 id="Streaming_MQTT-client">4.4 How to connect to your stream using an MQTT client</h3>

To receive real-time data over the MQTT protocol, you'll need to set up an MQTT client – a lightweight software component that connects to an MQTT broker and subscribes to specific topics to receive messages.

1. Start by choosing an MQTT client. There are many options available, including MQTTX, MQTT Explorer and many others.
2. Verify that all [prerequisites](#Streaming_Connect-to-stream_Prerequisites) are met.
3. Create a [streaming configuration](#Streaming_Connect-to-stream_Create-Configuration).
4. Establish a Secure Connection. Set up a SSL/TLS connection to ensure that your data is encrypted in transit. Most MQTT clients support this through built-in configuration options.
5. Subscribe to the Topic. Once connected, subscribe to the relevant topic. This is the channel through which data will be sent. Messages published to this topic by the server will be delivered directly to your client. You can create a subscription by using your username and topic such as “username/topic”
6. Receive and Process Data. As data begins to stream in, your MQTT client will receive messages in real time. You can then process, display, or store this data according to your needs.
7. Stay authenticated. When the ID token expires, your stream connection is closed, and you cannot retrieve further vehicle data. For a continuous dataflow, request a new ID token in time and re-establish the connection.
<br>
<br>

<h3 id="Streaming_MQTT-example">4.5 Example: Connect to your stream using the MQTTX client and your ID token</h3>

Here´s an example of how to connect to your stream with the MQTTX-client which is free to download via [this](https://mqttx.app) page.<br>
In the given example, version v1.12.0 of the MQTTX-client was used.  

<u>Open the MQTTX application and create a new connection</u>

<img alt="CarData" src="https://bmwcardata.bmwgroup.net/cockpit/api/v1/content/download-content-file/3003" style="width: 75%" />

Figure 10: MQTTX Example - New connection
<br>
<br>
<u>The following window is displayed, enter the values accordingly</u>

<img alt="CarData" src="https://bmwcardata.bmwgroup.net/cockpit/api/v1/content/download-content-file/3004" style="width: 75%" />

Figure 11: MQTTX Example - Connection details & credentials
<br>
<br>

- In the field “Name”, select any name for your connection
- In the field "Host", select the "mqtts://". For the URI select the host from the [streaming credentials](#Streaming_credentials) visible in the [customer portal](#Customer-portals) after the stream was [configured](#Streaming_Connect-to-stream_Create-Configuration)
- In the field "Port", select the port from the [streaming credentials](#Streaming_credentials) visible in the [customer portal](#Customer-portals) after the stream was [configured](#Streaming_Connect-to-stream_Create-Configuration)
- In the field "Client ID" you can keep the suggestions , as this is generated by the client.
- In the field "Username", select the username from the [streaming credentials](#Streaming_credentials) visible in the [customer portal](#Customer-portals) after the stream was [configured](#Streaming_Connect-to-stream_Create-Configuration). This is your gcid. 
- In the field "Password", add your current [ID-Token](#ID-token), which you have received via the DCF. Be aware: The token must have the correct scopes and must not yet be expired.
- The other attributes (SSL/TLS, SSL Secure, and the certificates) should be set as the screenshots states.

<br>

<u>After connecting, click on “New Subscription” to subscribe to your stream:</u>

<img alt="CarData" src="https://bmwcardata.bmwgroup.net/cockpit/api/v1/content/download-content-file/3005" style="width: 55%" />

Figure 12: MQTTX Example - Subscription details
<br>
<br>
<p>
<u> Add the following values from your [streaming credentials](#Streaming_credentials) </u>
</p>
<img alt="CarData" src="https://bmwcardata.bmwgroup.net/cockpit/api/v1/content/download-content-file/3006" style="width: 55%" />

Figure 13: MQTTX Example - New subscription
<br>
<br>
<p>
As a topic name you can write: <i>your-user-name/your-unique-topic</i> to subscribe to a stream for the specified VIN, or you can subscribe to all your VINs with: <i>your-user-name/*</i>.

With this final step your stream in the MQTTX client is configured. Once data for the attributes in your streaming configuration is updated, a message in .json structure is visible in your MQTTX client. 
</p>